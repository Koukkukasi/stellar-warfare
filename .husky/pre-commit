#!/usr/bin/env sh
. "$(dirname -- "$0")/_/husky.sh"

echo "üö® Running Crash Prevention Checks..."

# Run ESLint with crash prevention plugin
npm run lint:crash-prevention

if [ $? -ne 0 ]; then
  echo ""
  echo "‚ùå CRASH PREVENTION CHECKS FAILED!"
  echo ""
  echo "Your code contains patterns that could cause crashes:"
  echo "  - Unbounded setInterval/requestAnimationFrame"
  echo "  - Missing cleanup handlers"
  echo "  - Missing resource limits"
  echo "  - Missing error boundaries in game loops"
  echo ""
  echo "Fix these issues before committing."
  echo ""
  exit 1
fi

echo "‚úÖ Crash Prevention Checks Passed"
